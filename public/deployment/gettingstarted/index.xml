<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>FoundryVTT 中文社区 – 服务器部署入门</title>
    <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/</link>
    <description>Recent content in 服务器部署入门 on FoundryVTT 中文社区</description>
    <generator>Hugo -- gohugo.io</generator>
    
	  <atom:link href="https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Deployment: 云服务器挑选/购买指南</title>
      <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/cloud/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/cloud/</guid>
      <description>
        
        
        

&lt;div class=&#34;pageinfo pageinfo-primary&#34;&gt;
&lt;p&gt;云服务器挑选和购买指南，与各云服务提供商&lt;em&gt;利益无关&lt;/em&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id=&#34;选购建议&#34;&gt;选购建议&lt;/h2&gt;
&lt;h3 id=&#34;配置&#34;&gt;配置&lt;/h3&gt;
&lt;p&gt;以当前的 FVTT 运行情况看，如果服务器上只运行 FVTT，那么 1G 内存的 Linux 服务器和 2G 内存的 Windows 服务器足够使用。&lt;/p&gt;
&lt;p&gt;CPU 核心数尽管对运行效率有直接影响，但单核心也足以满足多人游玩 FVTT。&lt;/p&gt;
&lt;p&gt;最重要的因素其实是带宽，如果购买 1Mbps 带宽的服务器用来跑 5 个人的团，意味着每个人在游玩时仅能分配到 200 Kbps = 25 KB/s。
如果一个新场景内的地图 2.5M 大小，则所有玩家平均需要等待 100 秒来下载完毕整张地图，更不必提还需要下载其他资源，&lt;em&gt;尤其是在服务器上存储了音乐等情况&lt;/em&gt;。&lt;/p&gt;
&lt;p&gt;通常认为，运行 FVTT 的服务器带宽最好要在 &lt;strong&gt;5Mbps 以上&lt;/strong&gt;（越高越好）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;然而&lt;/strong&gt;，云服务的按带宽计费的价格非常高，如果要提升到 5+Mbps 往往需要远高于其他配置的成本，并且会造成闲时带宽的浪费。如果可以接受按流量计费（每 GB 一般 0.8 元上下），则带宽大小本身不会被计费，可以设置到 100+Mbps，运行 FVTT 绰绰有余。&lt;/p&gt;
&lt;h3 id=&#34;系统&#34;&gt;系统&lt;/h3&gt;
&lt;p&gt;参见&lt;a href=&#34;../#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94&#34;&gt;部署方式对比&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;值得注意的是，Docker 部署方式可使用任意一个主流的 Linux 发行版作为操作系统&lt;/em&gt;。&lt;/p&gt;
&lt;h3 id=&#34;地域&#34;&gt;地域&lt;/h3&gt;
&lt;p&gt;云服务器的数据中心地理位置可能是最能直接影响体验的 &lt;em&gt;非直观&lt;/em&gt; 要素，需要斟酌。&lt;/p&gt;
&lt;p&gt;数据中心的地理位置，可以决定以下几个重要的判断要素：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;网络连接质量
&lt;ul&gt;
&lt;li&gt;墙内玩家占多数，甚至全部都是，那最好选择大陆或者香港的云服务，或者其他 CN2 线路服务器；反之全部都在境外的话，强烈建议选择境外云服务&lt;/li&gt;
&lt;li&gt;如果境内外玩家都有，可以考虑在香港部署，大多数的香港数据中心对境内外的访问质量都还算不错，至少不需要考虑境外玩家访问香港服务器的质量，而境内需要先行评估（或者使用全站加速，并且配置为全球加速）&lt;/li&gt;
&lt;li&gt;考虑玩家时也要注意，FVTT 一次部署可以一直使用。如果一直使用且玩家变动很大，GM 可以只考虑自己的访问质量&lt;/li&gt;
&lt;li&gt;尽管境内服务器对墙内玩家提供了更优质的访问质量，但同时也因为墙的存在，更难以下载位于境外服务器上的 FVTT 的游戏系统、MOD 等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;域名、备案
&lt;ul&gt;
&lt;li&gt;境内云服务器上，如果提供有域名的网页服务（直接访问 IP 并使用其他端口除外），则一定需要备案才能访问&lt;/li&gt;
&lt;li&gt;境外（比如香港）的云服务器，不需要备案即可提供域名访问&lt;/li&gt;
&lt;li&gt;如果在境内购买云服务，域名最好在同一家云服务提供商处购买；如果在境外，域名可以在 GoDaddy 或境内的云服务提供商购买&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;价格
&lt;ul&gt;
&lt;li&gt;境内云服务比境外贵不少，配置、带宽的价格都要高&lt;/li&gt;
&lt;li&gt;考虑学生机的价格，如果能购买学生机，价格远比正常购买便宜，但往往会因此只能购买位于境内的固定地理位置的数据中心（参见&lt;a href=&#34;#%E5%AD%A6%E7%94%9F%E6%9C%BA&#34;&gt;学生机&lt;/a&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;厂商&#34;&gt;厂商&lt;/h3&gt;
&lt;p&gt;厂商虽然对使用云服务的体验影响很大，但没必要比较性能（FVTT 不太吃性能），也不必评论谁好谁坏。&lt;/p&gt;
&lt;p&gt;主流购买选择：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;境内：阿里云、腾讯云
&lt;br/&gt;
境外：阿里云（香港为主）、 AWS、 Azure、搬瓦工&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;学生机&#34;&gt;学生机&lt;/h3&gt;
&lt;p&gt;阿里云、腾讯云、百度云等等，会对国内学生提供学生优惠。&lt;/p&gt;
&lt;p&gt;这些学生机面向大学生推出，一般年龄不超过 24 岁的用户都可以享受折扣，使得一台单核心 2GB 内存的服务器仅需 10 元/月或更低，拿来开 FVTT 服务器正好。&lt;/p&gt;
&lt;p&gt;但&lt;strong&gt;需要注意&lt;/strong&gt;以下的坑：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;带宽：不少学生机默认只给 1Mbps 的带宽，正如上文所提到的那样，用来运行 FVTT 只会让你怀疑人生&lt;/li&gt;
&lt;li&gt;某某云：某某云的学生机目前只有 ARM 架构的 CPU 可选。如果你对 Linux 没有太多使用经验，你可能会怀疑买了假服务器&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一般提到学生机，都会购买国内的。但如果不嫌麻烦的话（需要通过国际学生认证，或教育邮箱认证），国际上的学生优惠，可选项会很多：&lt;/p&gt;
&lt;p&gt;比如通过 GitHub 学生认证，可以获得：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DigitalOcean 学生优惠（送 50 刀，单核 1G 配置，可以购买 10 个月）&lt;/li&gt;
&lt;li&gt;Azure 学生优惠（送 100 刀，单核 1G 配置的香港服务器，可以购买 9 个月）&lt;/li&gt;
&lt;li&gt;Namecheap 的域名一年&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果认证无法通过，那境内最好的选择可能就是阿里云轻量应用服务器，简单直接没有别的套路，5Mbps 还算能用，每个月 1TB 的流量跑 FVTT 管够。&lt;/p&gt;
&lt;h2 id=&#34;登入-linux-云服务器&#34;&gt;登入 Linux 云服务器&lt;/h2&gt;
&lt;p&gt;相较于 Windows 服务器通过远程桌面的连接方式，Linux 服务器通过 SSH（并不需要知道这是什么）进行连接对新接触的用户来说，稍微显得不友好了一些，但好在常见的云服务商都提供了文档，可以较为方便地连接。&lt;/p&gt;
&lt;p&gt;以下介绍常见云服务提供商的 Linux 服务器连接方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;阿里云&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;云服务器 ECS：按照 &lt;a href=&#34;https://help.aliyun.com/document_detail/147650.html#title-rxh-1ss-110&#34;&gt;ECS Workbench 文档&lt;/a&gt;，使用终端连接&lt;/li&gt;
&lt;li&gt;轻量应用服务器 SWAS：在服务器&lt;code&gt;概览&lt;/code&gt;页面，点击右上角的&lt;code&gt;远程连接&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;腾讯云&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;云服务器：按照&lt;a href=&#34;https://cloud.tencent.com/document/product/213/5436&#34;&gt;标准登录方式&lt;/a&gt;连接&lt;/li&gt;
&lt;li&gt;轻量应用服务器：按照 &lt;a href=&#34;https://cloud.tencent.com/document/product/1207/44642&#34;&gt;WebShell 方式&lt;/a&gt;登录&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Microsoft Azure&lt;/strong&gt;：参见 &lt;a href=&#34;https://docs.microsoft.com/zh-cn/azure/virtual-machines/linux/ssh-from-windows&#34;&gt;Azure SSH 文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Amazon Web Services (AWS)&lt;/strong&gt;：参见 &lt;a href=&#34;https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html&#34;&gt;AWS SSH 文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Google Cloud Platform (GCP)&lt;/strong&gt;：参见 &lt;a href=&#34;https://cloud.google.com/compute/docs/ssh-in-browser&#34;&gt;GCP SSH 文档&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;其他问题&#34;&gt;其他问题&lt;/h2&gt;
&lt;p&gt;除了选购以外，使用云服务器过程中也可能遇到其他问题。&lt;/p&gt;
&lt;h3 id=&#34;部署完毕后无法访问&#34;&gt;部署完毕后无法访问&lt;/h3&gt;
&lt;p&gt;无论使用那种方式部署，完毕后，如果无法访问，常常是因为云服务器的防火墙设置，尚未放行 FVTT 正在使用的端口。&lt;/p&gt;
&lt;p&gt;一般来说，如果设置了域名并反代，需要设置&lt;strong&gt;入方向&lt;/strong&gt;的端口 80, 443 开放。&lt;/p&gt;
&lt;p&gt;而如果只是使用 30000 端口或者修改的其他端口，只需要设置对应端口在&lt;strong&gt;入方向&lt;/strong&gt;上开放即可。&lt;/p&gt;
&lt;p&gt;或者，可以放行所有端口，更方便用户正常使用。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;../docker/#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B&#34;&gt;Docker 部署方式自动脚本&lt;/a&gt;如果不使用域名，文件管理器的网站需要打开入方向 30001 端口，仪表盘需要打开入方向 30002 端口。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以下是几种常见的云服务器的防火墙设置方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://help.aliyun.com/document_detail/25471.html&#34;&gt;阿里云 ECS&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://help.aliyun.com/document_detail/59086.html&#34;&gt;阿里云轻量应用服务器&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cloud.tencent.com/document/product/213/15377&#34;&gt;腾讯云 CVM&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://cloud.tencent.com/document/product/1207/44577&#34;&gt;腾讯轻量应用服务器&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.microsoft.com/zh-cn/azure/virtual-machines/windows/nsg-quickstart-portal&#34;&gt;Azure VM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://aws.amazon.com/cn/premiumsupport/knowledge-center/connect-http-https-ec2/&#34;&gt;AWS EC2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
    <item>
      <title>Deployment: 域名购买/绑定指南</title>
      <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/domain-name/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/domain-name/</guid>
      <description>
        
        
        &lt;h2 id=&#34;购买域名&#34;&gt;购买域名&lt;/h2&gt;
&lt;p&gt;目前各大云服务提供商基本都提供了域名购买、托管以及 DNS 解析服务，实现一站式服务。&lt;/p&gt;
&lt;p&gt;服务器对域名没有任何要求，但需要注意，如果购买域名并绑定国内服务器使用，则需要备案，而备案对域名后缀（顶级域名）有要求。目前国内云平台购买域名时，如果遇到不能备案的后缀，会提示无法备案，所以注意查看信息就不必担心购买域名之后无法使用的问题。&lt;/p&gt;
&lt;p&gt;使用域名一般有如下要求和步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;选择域名&lt;/strong&gt;，全凭个人喜好，但注册之后无法更换，只能新买&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;付款、续费&lt;/strong&gt;，域名一般按年购买，到期之前需要续费，否则会被回收（不少首年便宜的域名，续费价格很高）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实名认证&lt;/strong&gt;，需要填写个人信息并公开，部分域名商可以隐藏域名拥有者实名信息（备案要求必须匹配实名）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DNS 解析&lt;/strong&gt;，利用 DNS 解析服务，&lt;a href=&#34;#%E7%BB%91%E5%AE%9A%E5%AD%90%E5%9F%9F%E5%90%8D&#34;&gt;绑定域名到服务器&lt;/a&gt;或者做其他解析&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;在国内购买域名，域名注册局要求需要提供身份证等信息进行实名认证，这也是备案的必需前置步骤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;备案&#34;&gt;备案&lt;/h2&gt;


&lt;div class=&#34;alert alert-primary&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;可选&lt;/h4&gt;
仅国内服务器架设网站使用域名时需要备案，如果使用境外服务器（含香港），无需备案
&lt;/div&gt;

&lt;p&gt;目前方便的备案方式是通过各个云服务自己的备案渠道申请，这就要求需要在该平台购买云服务器或者域名（比如腾讯云就对此有要求），所以尽量在一个云服务提供商处解决所有问题，而不要拼凑着买。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://beian.miit.gov.cn/&#34;&gt;工信部自行备案&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://beian.aliyun.com/&#34;&gt;阿里云备案&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cloud.tencent.com/product/ba&#34;&gt;腾讯云备案&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;绑定子域名&#34;&gt;绑定（子）域名&lt;/h2&gt;


&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;注意&lt;/h4&gt;
国内服务器未备案无法使用域名来访问网站
&lt;/div&gt;

&lt;p&gt;绑定域名依赖于购买域名的域名提供商和 DNS 服务，各家的界面、操作会有一些不同，但域名的基本管理方式和相关术语是一致的。简单来说，&lt;strong&gt;你需要创建一条 A 记录，映射到你将要安装 FVTT 的服务器的 IP 地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;如图所示，腾讯云的 DNS 解析管理界面，正在添加的记录便是 &lt;code&gt;foundry.xxx.yyy&lt;/code&gt;（&lt;code&gt;foundry&lt;/code&gt; 是子域名，&lt;code&gt;xxx.yyy&lt;/code&gt; 是你注册的域名），其他 DNS 解析设置界面大同小异，详细可以参见平台自己的帮助。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;主机记录&lt;/strong&gt;填写你想使用的子域名（比如&lt;code&gt;foundry&lt;/code&gt;），或者使用&lt;code&gt;@&lt;/code&gt;来代表直接使用 &lt;code&gt;xxx.yyy&lt;/code&gt; 访问&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;记录类型&lt;/strong&gt;选择 A 记录&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;记录值&lt;/strong&gt;填写需要服务器的 &lt;strong&gt;公网&lt;/strong&gt; IP，其他 IP 无法访问&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其他设置都使用默认设置即可。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/domain-name.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Deployment: Ubuntu 部署 FoundryVTT 教程</title>
      <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/ubuntu/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/ubuntu/</guid>
      <description>
        
        
        &lt;blockquote&gt;
&lt;p&gt;本篇教程参考 FVTT 英文社群网站 &lt;a href=&#34;https://foundry-vtt-community.github.io/wiki/Ubuntu-VM/&#34;&gt;Ubuntu VM 部署教程&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;介绍&#34;&gt;介绍&lt;/h2&gt;
&lt;p&gt;Ubuntu 目前逐步取代了其他发行版，取得了新的大量的市场份额，无论是在桌面端还是在服务器端。这篇教程主要讲述如何在安装了 Ubuntu Server 的服务器上部署 Foundry VTT，并使其保持运行并使用反向代理访问。&lt;/p&gt;
&lt;p&gt;我们会使用 node 的进程管理工具来保证 Foundry VTT 的实例持续运行，而且提供详尽的统计信息，还包括方便的启动、停止、重启命令，以及服务器重启时自动启动 FVTT 的服务。&lt;/p&gt;
&lt;p&gt;如果拥有域名的话，你和玩家们将会从浏览器上输入域名，通过 HTTPS 加密的反向代理访问 FVTT；如果没有使用到域名，也会输入反代后的对应 IP 和端口访问。&lt;/p&gt;
&lt;p&gt;本篇教程介绍的部署方式，不会直接让玩家们访问 FVTT 实例暴露出的端口。这样做可以获得一些反代的优势，同时不会有什么显著的缺点，了解反代的优劣势具体可以参考网上一些介绍反向代理的文章。&lt;/p&gt;
&lt;h2 id=&#34;配置服务器环境&#34;&gt;配置服务器环境&lt;/h2&gt;
&lt;p&gt;Ubuntu 服务器上运行 FVTT，需要配置好运行环境：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Node.js 运行时，其对应的软件包管理器 npm，以及使用 npm 安装的 pm2（进程管理工具）&lt;/li&gt;
&lt;li&gt;反向代理软件 Caddy，以及其暴露端口的防火墙（比如 80、443）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;首先，假设已经登入了 Ubuntu Server 服务器，并且能够获得 root 权限。&lt;/p&gt;
&lt;h3 id=&#34;第一步安装-nodejs-npm-和-unzip&#34;&gt;第一步：安装 Node.js, npm 和 Unzip&lt;/h3&gt;
&lt;p&gt;运行下面命令（适用于 Ubuntu，其他 Linux 发行版使用的命令可能不一致）：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -sL https://deb.nodesource.com/setup_14.x &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; sudo bash -
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt install -y libssl-dev nodejs unzip
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;以上命令会安装 node.js 以及包管理器 npm。使用 &lt;code&gt;node --version&lt;/code&gt; 和 &lt;code&gt;npm --version&lt;/code&gt; 来确认安装是否成功以及版本号。&lt;/p&gt;
&lt;h3 id=&#34;第二步安装-caddy&#34;&gt;第二步：安装 Caddy&lt;/h3&gt;
&lt;p&gt;运行以下命令将会安装 Caddy：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;deb [trusted=yes] https://apt.fury.io/caddy/ /&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; sudo tee -a /etc/apt/sources.list.d/caddy-fury.list
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt install caddy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;以上命令将会同时创建用于启动 Caddy 的 Linux 用户和用户组，接下来启用 Caddy 服务：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl &lt;span style=&#34;color:#204a87&#34;&gt;enable&lt;/span&gt; caddy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;第三步安装-nodejs-进程管理工具pm2&#34;&gt;第三步：安装 Node.js 进程管理工具：pm2&lt;/h3&gt;
&lt;p&gt;使用刚才安装的 npm，全局安装 pm2：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo npm install -g pm2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;第四步下载-fvtt-并测试&#34;&gt;第四步：下载 FVTT 并测试&lt;/h3&gt;
&lt;p&gt;创建 FVTT 使用的目录并切换：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir /tmp/foundrydata &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; mkdir ~/foundrydata
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir ~/foundry &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; ~/foundry
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;pwd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;pwd&lt;/code&gt; 命令输出结果应当是 &lt;code&gt;/home/[XXX]/foundry&lt;/code&gt;，&lt;code&gt;[XXX]&lt;/code&gt; 是登录服务器使用的 Linux 用户名。&lt;/p&gt;
&lt;p&gt;从官网上获取 FVTT 下载链接（Linux），在服务器上运行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;https://foundryvtt.s3-us-west-2.amazonaws.com/releases/[Key]/FoundryVirtualTabletop-linux-x64.zip&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;后面的这段链接替换为从官网处复制到的链接&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;下载完毕后，解压 FVTT（如果文件名不一致，更换为下载保存的 FVTT 压缩包文件名）：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;unzip FoundryVirtualTabletop-linux-x64.zip
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rm FoundryVirtualTabletop-linux-x64.zip
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后测试确认 FVTT 是否能够正常运行：&lt;code&gt;node $HOME/foundry/resources/app/main.js --port=62621 --dataPath=/tmp/foundrydata&lt;/code&gt;：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FoundryVTT &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; 2020-07-06 07:48:44 &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;info&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Foundry Virtual Tabletop - Version 0.6.5
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FoundryVTT &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; 2020-07-06 07:48:44 &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;info&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Running on Node.js - Version 12.18.2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FoundryVTT &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; 2020-07-06 07:48:44 &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;info&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Application Options:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;port&amp;#34;&lt;/span&gt;: 62621,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;dataPath&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/tmp/foundrydata&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;upnp&amp;#34;&lt;/span&gt;: false,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;fullscreen&amp;#34;&lt;/span&gt;: false,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;hostname&amp;#34;&lt;/span&gt;: null,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;routePrefix&amp;#34;&lt;/span&gt;: null,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;sslCert&amp;#34;&lt;/span&gt;: null,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;sslKey&amp;#34;&lt;/span&gt;: null,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;awsConfig&amp;#34;&lt;/span&gt;: null,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;proxySSL&amp;#34;&lt;/span&gt;: false,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;proxyPort&amp;#34;&lt;/span&gt;: null
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果显示类似于上述的输出结果并且没有显示什么错误，证明 FVTT 已经可以正常运行了！&lt;/p&gt;
&lt;p&gt;然后按下 &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;C&lt;/kbd&gt; 直接杀掉用来测试的 FVTT 进程，准备进行下一步。&lt;/p&gt;
&lt;h2 id=&#34;pm2-运行-fvtt&#34;&gt;pm2 运行 FVTT&lt;/h2&gt;
&lt;p&gt;需要的运行环境都已经配置完毕，接下来需要将 pm2 设置为随系统启动，并让 pm2 管理和运行 FVTT 进程。&lt;/p&gt;
&lt;h3 id=&#34;pm2-配置为系统服务&#34;&gt;pm2 配置为系统服务&lt;/h3&gt;
&lt;p&gt;首先我们要将 pm2 设置为随服务器开机启动。可以使用 pm2 自带的服务文件生成，对于 Ubuntu 系统，执行：&lt;code&gt;pm2 startup&lt;/code&gt;，结果如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[PM2] Init System found: systemd
[PM2] To setup the Startup Script, copy/paste the following command:
sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u [XXX] --hp /home/[XXX]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;它生成了一个命令，即&lt;code&gt;sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u [XXX] --hp /home/[XXX]&lt;/code&gt;这一部分，其中 &lt;code&gt;[XXX]&lt;/code&gt; 会被自动替换为当前登录使用的用户。复制输出的这段命令（而非从网页上复制）并且执行：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果使用 root 执行 &lt;code&gt;pm2 startup&lt;/code&gt; 命令，则会直接配置为系统服务，不需要复制粘贴命令执行&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;PM2&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;v&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Command successfully executed.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果输出结果中含有以上这段，基本上 pm2 已经被配置为系统服务。&lt;/p&gt;
&lt;h3 id=&#34;pm2-启动-fvtt-并持续运行&#34;&gt;pm2 启动 FVTT 并持续运行&lt;/h3&gt;
&lt;p&gt;现在需要使用 pm2 启动 FVTT，并且让 pm2 记住需要保持 FVTT 的运行，如此就可以让 pm2 在每次服务器重启时都会跟随启动，不需要手动。&lt;/p&gt;
&lt;p&gt;使用 pm2 启动 FVTT，还是一样 &lt;code&gt;[xxx]&lt;/code&gt; 替换为登录服务器使用的用户名：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pm2 start &lt;span style=&#34;color:#000&#34;&gt;$HOME&lt;/span&gt;/foundry/resources/app/main.js --name foundry -- --port&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;8080&lt;/span&gt; --dataPath&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;$HOME&lt;/span&gt;/foundrydata
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;端口号&lt;code&gt;8080&lt;/code&gt;可以调整，但是后续的端口号都需要对应修改&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;运行完毕后，使用 &lt;code&gt;pm2 list&lt;/code&gt; 来查看 pm2 正在管理的进程实例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;PM2&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Starting /home/&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;XXX&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;/foundry/resources/app/main.js in fork_mode &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; instance&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;PM2&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Done.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌──────────┬────┬─────────┬──────┬───────┬────────┬─────────┬────────┬─────┬───────────┬────────┬──────────┐
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│ App name │ id │ version │ mode │ pid   │ status │ restart │ uptime │ cpu │ mem       │ user   │ watching │
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;├──────────┼────┼─────────┼──────┼───────┼────────┼─────────┼────────┼─────┼───────────┼────────┼──────────┤
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│ foundry  │ &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;  │ 0.6.5   │ fork │ &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;31130&lt;/span&gt; │ online │ &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;       │ 0s     │ 0%  │ 8.9 MB    │ &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;XXX&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;  │ disabled │
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└──────────┴────┴─────────┴──────┴───────┴────────┴─────────┴────────┴─────┴───────────┴────────┴──────────┘
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Use &lt;span style=&#34;color:#4e9a06&#34;&gt;`&lt;/span&gt;pm2 show &amp;lt;id&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;name&amp;gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;`&lt;/span&gt; to get more details about an app
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;pm2 会展示如上所示的列表，并且展示大量有用的信息，比如是否运行中，进程重启次数，运行时间， CPU 使用率和内存使用率等等。使用 &lt;code&gt;pm2 show foundry&lt;/code&gt; 可以展示更详尽的关于启动的 FVTT 进程的信息。&lt;/p&gt;
&lt;p&gt;接下来使用 &lt;code&gt;pm2 save&lt;/code&gt;，即可保存配置，令 pm2 记住对 FVTT 进程的管理。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pm2 start foundry&lt;/code&gt; 启动 FVTT&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pm2 stop foundry&lt;/code&gt; 停止 FVTT&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pm2 restart foundry&lt;/code&gt; 重启 FVTT&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pm2 delete foundry&lt;/code&gt; 删除 FVTT 的管理项，不再使用 pm2 管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;事实上，此处如果 8080 端口防火墙已放行，就应该可以访问了。在自己的浏览器上输入 &lt;code&gt;http://[服务器IP]:8080&lt;/code&gt; 来尝试访问，防火墙放行即可见到 FVTT 的界面；如果不能访问，是好事，因为我们不想开放这个端口。&lt;/p&gt;
&lt;h2 id=&#34;设置反向代理&#34;&gt;设置反向代理&lt;/h2&gt;
&lt;p&gt;相反，用户应该使用反代来连接，而使用 Caddy 可以简化配置反代的流程。而且，如果用到域名，使用 Caddy 配置 HTTPS 将非常简单，它内置申请 LetsEncrypt 的证书并自动更新的方法，无需额外配置。&lt;/p&gt;


&lt;div class=&#34;alert alert-primary&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;可选&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;如果使用域名，需要将域名&lt;a href=&#34;../domain-name/#%E7%BB%91%E5%AE%9A%E5%AD%90%E5%9F%9F%E5%90%8D&#34;&gt;绑定&lt;/a&gt;上&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;接下来使用到的域名都假定为 &lt;code&gt;my.foundry.com&lt;/code&gt;，记得替换为自己的域名&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;执行 &lt;code&gt;sudo nano /etc/caddy/Caddyfile&lt;/code&gt;，将会开始编辑 Caddy 的配置文件。使用域名和不使用域名基本配置文件的内容都近似，在命令进入的 nano 界面中，输入以下内容，根据使用域名与否来区分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不使用域名
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;:80 {
    reverse_proxy localhost:8080 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;使用域名
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;my.foundry.com {
    reverse_proxy localhost:8080 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;输入或者粘贴完毕后，按下 &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;X&lt;/kbd&gt;，接着按 &lt;kbd&gt;y&lt;/kbd&gt; 并且回车，确认保存文件。&lt;/p&gt;
&lt;p&gt;然后启动已经配置好的 Caddy 服务即可：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl start caddy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;等待一段时间后，通过你设置的域名或者服务器 IP 地址，即可访问已经部署完毕的 FVTT，尽情使用吧。&lt;/p&gt;


&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;注意&lt;/h4&gt;
如果无法访问，检查是否开启服务器防火墙的 80/443 端口，这两个端口需要打开
&lt;/div&gt;


      </description>
    </item>
    
    <item>
      <title>Deployment: CentOS 部署 FoundryVTT 教程</title>
      <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/centos/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/centos/</guid>
      <description>
        
        
        &lt;blockquote&gt;
&lt;p&gt;这里介绍&lt;a href=&#34;https://www.peatsuki.com/008.html&#34;&gt;雙月ひめは的 CentOS 教程&lt;/a&gt;以及其&lt;a href=&#34;https://www.peatsuki.com/010.html&#34;&gt;一键部署脚本教程&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;脚本部署&#34;&gt;脚本部署&lt;/h2&gt;
&lt;p&gt;你需要一个CentOS7.x版本的 linux虚拟机，然后执行如下命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo su root
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget https://sh.peatsuki.com/fvtt/InstallFVTT.sh --no-check-certificate
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sh InstallFVTT.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;del&gt;&lt;a href=&#34;https://foundryvtt.com/&#34;&gt;官网地址&lt;/a&gt; 登录以购买的账户以获取下载链接。&lt;/del&gt;
现无需输入官网地址，已经重定向到镜像，但仍需要登入官网购买licence以便激活系统&lt;/p&gt;
&lt;p&gt;安装过程中需要中输入非【P】的任意字符选择 &lt;code&gt;以nohup进行后台运行&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;若需要使用 PM2 作为后台监视程序，建议有足够的OPS知识后进行选择。&lt;/p&gt;
&lt;p&gt;如需上传文件，需要设置 root 账号密码后使用 SFTP 工具上传，例如 WinSCP 等。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;如果因为设置密码造成的系统重启，则需要在远程连接中执行如下内容：（执行后需要等待2-3分钟系统运行即可访问）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo su root
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sh startfvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;使用脚本在阿里云-centos-机器上部署的教程视频&#34;&gt;使用脚本在阿里云 CentOS 机器上部署的教程视频&lt;/h3&gt;
&lt;style&gt;
.aspect-ratio {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 75%;
}
        
.aspect-ratio iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
}
&lt;/style&gt;

&lt;div class=&#34;aspect-ratio&#34;&gt;
    &lt;iframe src=&#34;https://player.bilibili.com/player.html?bvid=BV1Q54y1v7FX&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&#34;
    scrolling=&#34;no&#34;
    frameborder=&#34;no&#34;
    framespacing=&#34;0&#34;
    allowfullscreen=&#34;true&#34;&gt;
    &lt;/iframe&gt;
&lt;/div&gt;
&lt;h2 id=&#34;手动部署&#34;&gt;手动部署&lt;/h2&gt;
&lt;h3 id=&#34;0x00-目标服务器&#34;&gt;0x00 目标服务器&lt;/h3&gt;
&lt;p&gt;阿里云轻量服务器是一个物美价廉的香港服务器。&lt;/p&gt;
&lt;p&gt;目前定价为 1U1G=24 元、1U2G=34 元。（截至 2020/7/1 日）&lt;/p&gt;
&lt;p&gt;峰值带宽为 30M，流量为 1T-2T 左右。已经足够当我们的服务器使用。&lt;/p&gt;
&lt;p&gt;请注意：由于非大陆地域的虚拟主机提供国际带宽，如在中国大陆使用，会有较大的网络延迟。&lt;/p&gt;
&lt;h3 id=&#34;0x01-我的服务器状况&#34;&gt;0x01 我的服务器状况&lt;/h3&gt;
&lt;p&gt;我的服务器上已经做了 apache+php+wordpress，并且配置了全域 SSL 和加入 HSTS Preload List。&lt;/p&gt;
&lt;p&gt;经过考虑，我让 FoundryVTT 和这个 wordpress 博客挤一挤。以下制作代码建立在我的环境之下。&lt;/p&gt;
&lt;p&gt;阿里云自带的 WordPress 4.8.1 或许能提供类似环境（不保证）&lt;/p&gt;
&lt;h3 id=&#34;0x02-安装nodejs环境来源于官方指导&#34;&gt;0x02 安装node.js环境（来源于官方指导）&lt;/h3&gt;
&lt;p&gt;依次运行以下语句&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo yum install -y openssl-devel
curl --silent --location https://rpm.nodesource.com/setup_12.x | sudo bash -
sudo yum install -y nodejs
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;0x03-创建对应文件夹并下载foundryvtt运作档来源于官方指导&#34;&gt;0x03 创建对应文件夹并下载FoundryVTT运作档（来源于官方指导）&lt;/h3&gt;
&lt;p&gt;依次运行以下语句，其中斜线部分需要去你的FoundrtVTT授权页面点击node.js后方的链条按钮获得临时下载地址，并替换斜体部分。&lt;/p&gt;
&lt;pre&gt;
cd $HOME
mkdir foundryvtt
mkdir foundrydata
cd foundryvtt
wget -O foundryvtt.zip &#34;&lt;em&gt;https://foundryvtt.s3.amazonaws.com/releases/0.6.4/foundryvtt-0.6.4.zip&lt;/em&gt;&#34;
unzip foundryvtt.zip
&lt;/pre&gt;
&lt;h3 id=&#34;0x04-使用直接运行的方式测试foundrtvtt来源于官方指导&#34;&gt;0x04 使用直接运行的方式测试FoundrtVTT（来源于官方指导）&lt;/h3&gt;
&lt;p&gt;运行以下语句并访问你的服务器公网地址测试，例如：&lt;code&gt;http://127.0.0.1:30000&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;node resources/app/main.js --dataPath=$HOME/foundrydata
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;0x05-使用pm2创建nodejs值守进程来源于社区指导&#34;&gt;0x05 使用PM2创建node.js值守进程（来源于社区指导）&lt;/h3&gt;
&lt;p&gt;依次运行以下语句，安装pm2并创建值守进程&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cd $home
npm install -g pm2
pm2 start foundrtvtt/resources/app/main.js
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;0x06-安装ssl证书&#34;&gt;0x06 安装SSL证书&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cd /foundrydata
mkdir ssl
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后将证书的 crt、key 文件拷贝到 ssl 文件夹下。（建议采用 FTP 方式或者 SFTP 方式）&lt;/p&gt;
&lt;p&gt;打开 FoundryVTT，在 Configuration 中修改以下内容（斜体部分需要根据实际情况修改）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UserDataPath修改为 &lt;em&gt;&lt;code&gt;/root/foundrydata&lt;/code&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;填写SSL Certifilcate &lt;em&gt;&lt;code&gt;/root/foundrydata/ssl/yourdomain.crt&lt;/code&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;填写SSL Private Key &lt;em&gt;&lt;code&gt;/root/foundrydata/ssl/yourdomain.key&lt;/code&gt;&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然后点击 Save Changes 保存配置文件&lt;/p&gt;
&lt;h3 id=&#34;0x07配置apache实现反向代理&#34;&gt;0x07配置apache实现反向代理&lt;/h3&gt;
&lt;p&gt;修改 &lt;code&gt;/usr/local/apache/conf/httpd.conf&lt;/code&gt; 的内容，添加以下字段：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule proxy_wstunnel_module modules/mod_proxy_wstunnel.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;修改 &lt;code&gt;/usr/local/apache/conf/extra/httpd-ssl.conf&lt;/code&gt; 文件，添加以下字段，其中斜下划线部分需要根据实际情况修改：&lt;/p&gt;
&lt;pre&gt;
&amp;lt;VirtualHost *:443&amp;gt;
ServerName &lt;em&gt;&lt;u&gt;yourdomain.com&lt;/u&gt;&lt;/em&gt;
ServerAlias &lt;em&gt;&lt;u&gt;yourdomain.com&lt;/u&gt;&lt;/em&gt;
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/socket.io [NC]
RewriteCond %{QUERY_STRING} transport=websocket [NC]
RewriteRule /(.*) &lt;em&gt;&lt;u&gt;wss://yourdomain.com:30000/$1&lt;/u&gt;&lt;/em&gt; [P,L]
SSLEngine On
SSLProxyEngine on
SSLCertificateFile &lt;em&gt;&lt;u&gt;/root/foundrydata/ssl/yourdomain.crt&lt;/u&gt;&lt;/em&gt;
SSLCertificateKeyFile &lt;em&gt;&lt;u&gt;/root/foundrydata/ssl/yourdomain.key&lt;/u&gt;&lt;/em&gt;
SSLCertificateChainFile &lt;em&gt;&lt;u&gt;/root/foundrydata/ssl/yourdomain_ca.crt&lt;/u&gt;&lt;/em&gt;
Options FollowSymLinks
AllowOverride All
Require all granted
ProxyRequests Off
ProxyPass / &#34;&lt;em&gt;&lt;u&gt;https://yourdomain.com:30000/&lt;/u&gt;&lt;/em&gt;&#34;
ProxyPassReverse / &#34;&lt;em&gt;&lt;u&gt;https://yourdomain.com:30000/&lt;/u&gt;&lt;/em&gt;&#34;
&amp;lt;/VirtualHost&amp;gt;
&lt;/pre&gt;
&lt;p&gt;最后重启apache：
&lt;code&gt;/usr/local/apache/bin/apachectl restart&lt;/code&gt;&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Deployment: Docker 部署 FoundryVTT 教程</title>
      <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/docker/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/docker/</guid>
      <description>
        
        
        &lt;p&gt;Foundry VTT 目前拥有若干个来自不同用户实现的 Dockerfile，这些实现中，较为推荐 &lt;a href=&#34;https://github.com/felddy/foundryvtt-docker&#34;&gt;felddy/foundryvtt&lt;/a&gt; 的镜像，而使用该教程中提供的 Linux 自动部署脚本，可以简化操作，自动部署，无需学习 Docker 的使用和管理。&lt;/p&gt;
&lt;h2 id=&#34;介绍&#34;&gt;介绍&lt;/h2&gt;
&lt;p&gt;目前可以通过中文社区的自动脚本进行容器化部署，也可以手动启动容器。&lt;/p&gt;
&lt;p&gt;在全新购买的云服务器上使用自动脚本进行部署，最少只需要输入 Foundry VTT 站点上的用户名和密码即可完成，同时脚本也包含了后续更新、维护的方法。&lt;/p&gt;
&lt;h3 id=&#34;使用-docker-的优点&#34;&gt;使用 Docker 的优点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;无需关心系统环境：只要是主流发行版的 Linux，甚至于 Windows 服务器，只要安装了 Docker，即和其他用户的部署行为一致，难以因系统环境问题出错&lt;/li&gt;
&lt;li&gt;直接使用 Docker 的后台管理：Docker 自己会监控容器内运行的进程状态、网站可访问状态，如果意外情况导致 FVTT 崩溃或无法访问，可以不需要使用 pm2 等进程监控工具即可自动重启、还原&lt;/li&gt;
&lt;li&gt;目前主流的 FVTT 的 Docker 镜像包含内置的自动获取下载地址和授权的脚本，可以简化部署流程&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;使用-docker-的缺点&#34;&gt;使用 Docker 的缺点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;如果使用卷挂载，直接访问 FVTT 的数据文件会变得略困难（可以通过 Docker 启动其他容器简化文件访问，以下自动部署脚本已使用 Web 文件管理器解决该问题）&lt;/li&gt;
&lt;li&gt;目前主流的 FVTT 的 Docker 镜像升级时需要重建容器，而不能通过 FVTT 内置更新（以下自动部署脚本可以大幅简化更新流程）&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;使用教程&#34;&gt;使用教程&lt;/h2&gt;
&lt;h3 id=&#34;自动部署脚本安装流程&#34;&gt;自动部署脚本安装流程&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;首先，假设已经登入了 Linux 服务器，并且能够获得 root 权限&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果还没有 Linux 服务器，可以参见&lt;a href=&#34;../cloud/#%E7%99%BB%E5%85%A5-linux-%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8&#34;&gt;云服务器指南&lt;/a&gt;，了解如何购买/基本操作&lt;/li&gt;
&lt;li&gt;你无需了解什么是 root 权限，云服务通常会提供；如果确认无法获取，可咨询客服&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下载脚本&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O fvtt.sh https://fvtt-cn.coding.net/p/FoundryDeploy/d/FoundryDeploy/git/raw/master/fvtt.sh &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo chmod +x fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;由于coding仓库拉取限制，改为以下两个方式
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;海外服务器请用
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O fvtt.sh https://raw.githubusercontent.com/fvtt-cn/FoundryDeploy/master/fvtt.sh &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo chmod +x fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;大陆服务器请用
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O fvtt.sh https://raw.fastgit.org/fvtt-cn/FoundryDeploy/master/fvtt.sh &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo chmod +x fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运行脚本，进行安装&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装时会检查是否能获取 root 权限，并且如果没有安装 Docker 会自动安装。&lt;/p&gt;
&lt;p&gt;境内服务器下载镜像时可能会等待较长时间，可以耐心等待。&lt;/p&gt;
&lt;p&gt;然后脚本会提示输入参数，每条参数输入完成后回车即可，参数包含（✅：必需 | ⭕：可选）：
&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/docker-script-input.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;✅ FVTT 账号&lt;/li&gt;
&lt;li&gt;✅ FVTT 密码 （用于获取 FVTT 下载地址/授权信息）&lt;/li&gt;
&lt;li&gt;⭕ 版本号/下载地址
&lt;ul&gt;
&lt;li&gt;直接回车跳过输入版本号，使用最新稳定版即可&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;注意&lt;/strong&gt;：如果使用境内服务器，从 FVTT 官方下载安装包会比较慢，可以考虑粘贴&lt;a href=&#34;../../../modules/#fvtt-%E8%BD%AF%E4%BB%B6%E9%95%9C%E5%83%8F&#34;&gt;星界投影&lt;/a&gt;的镜像下载源的 Linux 版本下载链接。&lt;strong&gt;境内服务器推荐使用镜像；境外服务器建议直接输入版本号&lt;/strong&gt;！&lt;/li&gt;
&lt;li&gt;Linux 版 FVTT （即本脚本需要使用的）的星界投影的镜像下载地址为：&lt;code&gt;https://cdn.sbea.in/foundry/linux/foundryvtt-0.7.9.zip&lt;/code&gt;。如果需要使用其他版本，替换链接中的 &lt;code&gt;0.7.9&lt;/code&gt; 即可&lt;/li&gt;
&lt;li&gt;✅ 如果跳过了 FVTT 账号/密码的输入，则必须输入直链下载地址而非版本号来安装，否则无法获取 FVTT 下载地址&lt;/li&gt;
&lt;li&gt;例：&lt;code&gt;0.7.9&lt;/code&gt; 或 &lt;code&gt;https://cdn.sbea.in/foundry/linux/foundryvtt-0.7.9.zip&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;⭕ 自定义管理密码
&lt;ul&gt;
&lt;li&gt;安装完成后，如果设置了这个密码，需要使用密码才能进入 FVTT 管理界面（游玩无需），强烈推荐进行设置；回车跳过，将不设置密码，使任意用户均可管理 FVTT （包括删除世界等权限）&lt;/li&gt;
&lt;li&gt;例：&lt;code&gt;password&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;⭕ FVTT 绑定域名
&lt;ul&gt;
&lt;li&gt;如果为这台服务器绑定了给 FVTT 使用的域名（必须先绑定再安装），可以输入域名（不带 HTTP/HTTPS），否则直接回车跳过&lt;/li&gt;
&lt;li&gt;绑定域名的流程可参见&lt;a href=&#34;../domain-name/#%E7%BB%91%E5%AE%9A%E5%AD%90%E5%9F%9F%E5%90%8D&#34;&gt;绑定（子）域名&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;例：&lt;code&gt;my.fvtt.com&lt;/code&gt;（你已绑定该服务器的域名）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;⭕ FVTT CDN 加速域名
&lt;ul&gt;
&lt;li&gt;如果想要使用 CDN，可以配置一个 CDN 加速域名，详情参见 &lt;a href=&#34;../cdn&#34;&gt;CDN 配置&lt;/a&gt;章节，否则直接回车跳过&lt;/li&gt;
&lt;li&gt;例：&lt;code&gt;cdn.fvtt.com&lt;/code&gt;（你将设置的 CDN 回源使用的域名）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;⭕ 使用 Web 文件管理器
&lt;ul&gt;
&lt;li&gt;为了管理文件方便，建议使用。直接回车跳过设置，默认会使用；如果不使用，输入&lt;code&gt;n&lt;/code&gt;再回车&lt;/li&gt;
&lt;li&gt;例：直接回车（使用 Web 文件管理器）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;⭕ 如果使用 Web 文件管理器，可以绑定域名
&lt;ul&gt;
&lt;li&gt;如果需要给 Web 文件管理器绑定域名使用（必须先绑定再安装），可以输入，否则直接回车跳过&lt;/li&gt;
&lt;li&gt;例：&lt;code&gt;file.fvtt.com&lt;/code&gt;（你已绑定该服务器的域名）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;⭕ 使用 Docker 仪表盘
&lt;ul&gt;
&lt;li&gt;Docker 仪表盘（Portainer）用来方便的管理服务器上运行的容器（重启、监测状态等），比如 FVTT 和 Web 文件管理器等；默认不会使用，可以直接回车跳过&lt;/li&gt;
&lt;li&gt;例：直接回车（不使用仪表盘）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;⭕ 如果使用 Docker 仪表盘，可以绑定域名
&lt;ul&gt;
&lt;li&gt;如果需要给 Docker 仪表盘绑定域名使用（必须先绑定再安装），可以输入，否则直接回车跳过&lt;/li&gt;
&lt;li&gt;例：&lt;code&gt;dashboard.fvtt.com&lt;/code&gt;（你已绑定该服务器的域名）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;确认输入好的参数之后，便可以回车等待部署完成。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;部署完成后，Foundry VTT 可能还需要等待一会儿，完成软件的下载&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;部署完成后，脚本会提示如何访问 FVTT，如图所示：
&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/docker-script-result.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;以上即是使用 Docker 脚本首次部署的全部流程，如果有无法连接等其他问题可以参见下方 &lt;a href=&#34;#docker-%E9%83%A8%E7%BD%B2-faq&#34;&gt;Docker 部署 FAQ&lt;/a&gt;&lt;/strong&gt;。&lt;/p&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Tips&lt;/h4&gt;
自动部署脚本的其他使用方法和详情，请参见&lt;a href=&#34;https://github.com/fvtt-cn/FoundryDeploy&#34;&gt;脚本仓库&lt;/a&gt;中的文档
&lt;/div&gt;

&lt;h3 id=&#34;fvtt-升级更新流程&#34;&gt;FVTT 升级/更新流程&lt;/h3&gt;
&lt;p&gt;Docker 容器为了保证运行时文件尽量不受改动，避免在不同时间启动容器产生了行为上的差异，使用了 &lt;code&gt;--noUpdate&lt;/code&gt; 参数启动容器内的 FVTT，关闭了 Foundry VTT 自动更新的功能，使得用户无法使用 FVTT 内置的检查更新来升级。&lt;/p&gt;
&lt;p&gt;为了解决这个问题，自动部署脚本包含了如何升级容器内 FVTT 版本的方法，这个方法会保证数据文件夹内的文件不受改动，可以放心升级，&lt;em&gt;但 FVTT 升级后再启动世界往往会对世界进行更新&lt;/em&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;该方法不仅可以升级版本，还可以方便地用脚本重装同版本或者回退旧版本&lt;/strong&gt;。
44&lt;/p&gt;
&lt;h4 id=&#34;更新脚本&#34;&gt;更新脚本&lt;/h4&gt;
&lt;p&gt;更新脚本和下载脚本命令相同，粘贴执行以下命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O fvtt.sh https://fvtt-cn.coding.net/p/FoundryDeploy/d/FoundryDeploy/git/raw/master/fvtt.sh &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo chmod +x fvtt.sh~~
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;由于coding仓库拉取限制，改为以下两个方式
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;海外服务器请用
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O fvtt.sh https://raw.githubusercontent.com/fvtt-cn/FoundryDeploy/master/fvtt.sh &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo chmod +x fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;大陆服务器请用
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O fvtt.sh https://raw.fastgit.org/fvtt-cn/FoundryDeploy/master/fvtt.sh &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo chmod +x fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;升级流程&#34;&gt;升级流程&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;首先移除旧有容器&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./fvtt.sh remove
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;按提示，输入 &lt;code&gt;y&lt;/code&gt; 后回车确认，等待几秒后，旧版本容器即被成功删除&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;重建容器，使用新版本&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./fvtt.sh recreate
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;进入和安装流程非常类似的重建容器流程，默认使用已存储的配置文件，回车选择使用。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;版本号或者下载地址&lt;/strong&gt;：输入你想升级/回退的版本号或者对应下载地址即可
&lt;ul&gt;
&lt;li&gt;境外服务器输入版本号比如 &lt;code&gt;0.7.9&lt;/code&gt; 即可，境内服务器推荐使用星界投影镜像下载&lt;/li&gt;
&lt;li&gt;星界投影用法例如：&lt;code&gt;https://cdn.sbea.in/foundry/linux/foundryvtt-0.7.9.zip&lt;/code&gt;，需要其他版本，替换其中&lt;code&gt;0.7.9&lt;/code&gt;即可&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果询问&lt;strong&gt;是否需要清除 Caddyfile 内容&lt;/strong&gt;，如无特殊需求，回车跳过确认清除
&lt;ul&gt;
&lt;li&gt;出现该提示的原因一般是之前使用了旧版脚本进行部署，而使用了更新脚本（&lt;code&gt;v1.4.0+&lt;/code&gt;）进行 FVTT 更新，需要完全清空 Caddyfile&lt;/li&gt;
&lt;li&gt;清除 Caddyfile 不会影响之前安装的 FVTT 的世界、合集、模组等文件&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;注意&lt;/h4&gt;
&lt;p&gt;为了方便升级和二次部署，脚本运行后默认会存储输入的参数信息。如果不需要存储配置，避免如果服务器被黑之后账号信息可能的泄露，请在脚本运行完毕后删除 &lt;code&gt;fvtt-config&lt;/code&gt; 文件，执行：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo rm fvtt-config
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&#34;部署教程视频&#34;&gt;部署教程视频&lt;/h3&gt;
&lt;style&gt;
.aspect-ratio {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 75%;
}
        
.aspect-ratio iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
}
&lt;/style&gt;

&lt;div class=&#34;aspect-ratio&#34;&gt;
    &lt;iframe src=&#34;https://player.bilibili.com/player.html?bvid=BV1Bv41167n6&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&#34;
    scrolling=&#34;no&#34;
    frameborder=&#34;no&#34;
    framespacing=&#34;0&#34;
    allowfullscreen=&#34;true&#34;&gt;
    &lt;/iframe&gt;
&lt;/div&gt;
&lt;h2 id=&#34;docker-部署-faq&#34;&gt;Docker 部署 FAQ&lt;/h2&gt;
&lt;h3 id=&#34;无法完成部署&#34;&gt;无法完成部署&lt;/h3&gt;
&lt;p&gt;部署过程中，由于指令输入错误、网络波动之类的原因，可能会出现下载错误，弹出 &lt;code&gt;错误：...&lt;/code&gt; 一类消息并中断部署过程。根据弹出的错误提示，可以进行以下排错。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;错误：安装 Docker 失败，请查看使用教程 FAQ 或联系脚本作者
&lt;br/&gt;
错误：Docker 无法启动容器，请查看使用教程 FAQ 或联系脚本作者&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;正在使用的 Linux 发行版可能内核版本过时或并非官方认可，以致无法通过官方脚本安装或者使用 Docker。&lt;/p&gt;
&lt;p&gt;比如 Android 手机内核过时无法启动 Docker、群晖 NAS 无法通过官方安装脚本安装 Docker。&lt;/p&gt;
&lt;p&gt;解决方法是使用 Linux 主流发行版操作系统，如： &lt;code&gt;Ubuntu 16.04+&lt;/code&gt;, &lt;code&gt;CentOS 6+&lt;/code&gt;, &lt;code&gt;Debian Stretch+&lt;/code&gt;, &lt;code&gt;RHEL 7+&lt;/code&gt;, &lt;code&gt;Fedora 32+&lt;/code&gt; 等等。如果采用云服务器进行部署，通常在购买时以及购买后都可以任意选择需要安装的 Linux 发行版，尽量选择主流版本比如 &lt;code&gt;Ubuntu 20.04&lt;/code&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;错误：&amp;hellip; 端口被占用，无法 &amp;hellip; 部署
&lt;br/&gt;
错误：&amp;hellip; 已经启动过，请升级而非安装
&lt;br/&gt;
错误：&amp;hellip; 容器启动失败&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;出现这种情况的通常原因是已经部署过 FVTT 并且没有按照升级流程的步骤，首先移除旧有容器，需要先执行：&lt;code&gt;sudo ./fvtt.sh remove&lt;/code&gt; 以移除，具体步骤可以参见上文&lt;a href=&#34;#%E5%8D%87%E7%BA%A7%E6%B5%81%E7%A8%8B&#34;&gt;升级流程&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;错误：拉取 &amp;hellip; 失败&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;境内服务器更容易出现该错误，当网络出现波动，多次尝试后仍然无法成功下载 Docker 镜像后，即报此错。&lt;/p&gt;
&lt;p&gt;报错退出后，可以在再次执行脚本部署命令前，通过手动拉取解决该问题：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo docker pull ...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;将 &lt;code&gt;...&lt;/code&gt; 替换为拉取失败的镜像，镜像名称参见下表：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;报错名&lt;/th&gt;
&lt;th&gt;官方源镜像名&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;FoundryVTT&lt;/td&gt;
&lt;td&gt;felddy/foundryvtt:release&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Caddy&lt;/td&gt;
&lt;td&gt;library/caddy&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FileBrowser&lt;/td&gt;
&lt;td&gt;filebrowser/filebrowser:alpine&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Portainer&lt;/td&gt;
&lt;td&gt;portainer/portainer-ce&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ImageOptim&lt;/td&gt;
&lt;td&gt;hmqgg/image_optim&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;拉取成功后，再执行脚本部署命令。&lt;/p&gt;
&lt;p&gt;如果手动拉取镜像，但也始终提示 &lt;code&gt;Error response from ...&lt;/code&gt; 无法成功拉取对应镜像，可以考虑更换为官方源（境内下载偏慢）。如果这样做，执行脚本部署命令需要加上 &lt;code&gt;FORCE_GLO=true&lt;/code&gt;，改为：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo &lt;span style=&#34;color:#000&#34;&gt;FORCE_GLO&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt; ./fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果手动拉取后仍然因为网络连接不稳定导致部署容易出错，可以加上脚本设置的跳过拉取变量，改为：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo &lt;span style=&#34;color:#000&#34;&gt;PULL_SKIP&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt; ./fvtt.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;更新时同理，在后面添加&lt;/em&gt; &lt;code&gt;recreate&lt;/code&gt; 变为 &lt;code&gt;sudo FORCE_GLO=true ./fvtt.sh recreate&lt;/code&gt;。&lt;/p&gt;
&lt;hr&gt;


&lt;div class=&#34;alert alert-primary&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;注意&lt;/h4&gt;
&lt;p&gt;如果多次提示部署失败，可以使用 &lt;code&gt;sudo ./fvtt.sh clear&lt;/code&gt; 接着输入两次 &lt;code&gt;y&lt;/code&gt; 和回车以确认，清空已经完成的所有配置和存储，然后重新尝试全新安装&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;当心！如果已经使用此法运行过 FVTT 并有保存好的世界、模组、合集、游戏等文件，请勿使用 &lt;code&gt;sudo ./fvtt.sh clear&lt;/code&gt; 命令，否则会一并清除所有数据。在如此做之前，请确认你知道你在做什么&lt;/strong&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;hr&gt;
&lt;h3 id=&#34;部署完成后进行诊断&#34;&gt;部署完成后进行诊断&lt;/h3&gt;
&lt;p&gt;部署完成后，可能会出现无法访问、文件管理器打不开等异常情况，可以使用脚本进行诊断（版本需要 &lt;code&gt;v1.4.0+&lt;/code&gt;，如果版本过低可以参见上文&lt;a href=&#34;#%E6%9B%B4%E6%96%B0%E8%84%9A%E6%9C%AC&#34;&gt;更新脚本&lt;/a&gt;），执行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./fvtt.sh check
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;运行诊断时将会如下图一般输出结果，正常情况下结果应类似：
&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/docker-script-diagnose.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;该诊断可以多次运行；根据以上输出的结果，可以进行以下判断：&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;以上状态均正常，但是浏览器无法打开 FVTT，&lt;em&gt;以及无法打开 Web 文件管理器和 Docker 仪表盘（如果选择启用）&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;检查服务器防火墙设置，具体可以参见云服务器指南中的&lt;a href=&#34;../cloud/#%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%AF%95%E5%90%8E%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE&#34;&gt;部署完毕后无法访问&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;FoundryVTT 容器状态&lt;/strong&gt;显示 &lt;code&gt;running&lt;/code&gt;，&lt;strong&gt;登录状态&lt;/strong&gt;显示 &lt;code&gt;登录成功&lt;/code&gt;，但是&lt;strong&gt;下载状态&lt;/strong&gt;等待许久而始终显示 &lt;code&gt;未完成&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;查看&lt;strong&gt;下载速度&lt;/strong&gt;后的最后几行，如果正在下载 FVTT 文件，则此处会显示下载进度的记录。根据最后一行的指示顺序，可以查看到当前的下载状态，最后一列是当前的下载速度。&lt;/p&gt;
&lt;p&gt;类似这种结果，代表还在下载：
&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/docker-script-dlspeed.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;如果&lt;strong&gt;当前下载速度&lt;/strong&gt;降低到难以完成下载（通常是在境内服务器直接输入版本号或者回车跳过时），可以考虑删除旧有容器，然后重新部署，并使用&lt;a href=&#34;../../../modules/#fvtt-%E8%BD%AF%E4%BB%B6%E9%95%9C%E5%83%8F&#34;&gt;星界投影&lt;/a&gt;镜像的下载地址，加速 FVTT 下载，完整流程基本等于升级的步骤，具体可以参见上文&lt;a href=&#34;#fvtt-%E5%8D%87%E7%BA%A7%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B&#34;&gt;升级流程&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;境内服务器如果不使用镜像（比如镜像下线无法连接时），尽量考虑在白天进行下载，网络连接状况会好一些&lt;/em&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;FoundryVTT 容器状态&lt;/strong&gt;显示 &lt;code&gt;running&lt;/code&gt;，但是&lt;strong&gt;登录状态&lt;/strong&gt;显示 &lt;code&gt;登录失败&lt;/code&gt;，且&lt;strong&gt;下载状态&lt;/strong&gt;始终显示 &lt;code&gt;未完成&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这种情况代表输入参数时，填写了 FoundryVTT 的用户名和密码，但是用户名/密码错误，导致无法成功登录。&lt;/p&gt;
&lt;p&gt;按照升级流程，删除旧有容器，然后重新部署，参见上文&lt;a href=&#34;#fvtt-%E5%8D%87%E7%BA%A7%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B&#34;&gt;升级流程&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;需要注意的是，更新过程中在询问&lt;strong&gt;是否直接使用已存储的上次部署使用的配置&lt;/strong&gt;的时候，因为上次部署使用的用户名/密码并不正确，所以需要放弃使用：输入 &lt;code&gt;n&lt;/code&gt; 然后回车，拒绝使用，然后按照正常安装流程输入参数进行。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;如果暂时无法提供正确的 FVTT 用户名/密码，可以在输入用户名和密码时，都回车跳过。但这种情况下，必须要使用可下载镜像地址（比如&lt;a href=&#34;../../../modules/#fvtt-%E8%BD%AF%E4%BB%B6%E9%95%9C%E5%83%8F&#34;&gt;星界投影&lt;/a&gt;）或者从 FVTT 官网获取的直链来填写&lt;strong&gt;版本号或下载地址&lt;/strong&gt;，否则无法成功下载 FVTT 软件文件，也就无法运行&lt;/em&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;FoundryVTT 容器状态&lt;/strong&gt;显示 &lt;code&gt;exited&lt;/code&gt;，&lt;strong&gt;可访问性&lt;/strong&gt;显示 &lt;code&gt;unhealthy&lt;/code&gt;，&lt;strong&gt;FoundryVTT 文件状态&lt;/strong&gt;却显示 &lt;code&gt;可以运行&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;FVTT 容器意外退出且没有重启，可以重启所有容器，执行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./fvtt.sh restart
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;重启后等待几十秒，如果仍然无法访问可以考虑按照&lt;a href=&#34;#fvtt-%E5%8D%87%E7%BA%A7%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B&#34;&gt;升级流程&lt;/a&gt;重新部署。&lt;/p&gt;
&lt;hr&gt;


&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;注意&lt;/h4&gt;
&lt;p&gt;如果多次提示部署失败或者出现部署后诊断一切正常但仍无法打开，可以使用 &lt;code&gt;sudo ./fvtt.sh clear&lt;/code&gt; 接着输入两次 &lt;code&gt;y&lt;/code&gt; 和回车以确认，清空已经完成的所有配置，然后重新尝试安装&lt;/p&gt;
&lt;p&gt;但需要注意，如果之前已经通过此法部署并使用过 FVTT，拥有世界、合集、模组等游戏文件，清空会&lt;strong&gt;一并删除所有数据&lt;/strong&gt;！在如此做之前，请确定你知道你在做什么&lt;/p&gt;

&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;脚本额外功能&#34;&gt;脚本额外功能&lt;/h2&gt;
&lt;h3 id=&#34;图片自动压缩优化&#34;&gt;图片自动压缩/优化&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;需要脚本版本 &lt;code&gt;v1.5.0+&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;自动部署脚本中包含自动监控并优化 FVTT 数据目录下图片 &lt;code&gt;(jpg|png|gif|svg)&lt;/code&gt; 的容器：当有图片加入 &lt;code&gt;/data&lt;/code&gt; 数据目录下，如果已经部署了优化容器，将会操作图片并进行&lt;em&gt;有损压缩&lt;/em&gt;，在尽量少损失图片质量的情况下，减小图片的文件体积。&lt;/p&gt;
&lt;p&gt;FVTT 安装 MOD 和系统时，会清空文件夹并重新填充内容，故而本容器配置时会跳过 &lt;code&gt;modules&lt;/code&gt;/&lt;code&gt;systems&lt;/code&gt; 文件夹下的所有图片。&lt;/p&gt;
&lt;h4 id=&#34;启动图片优化容器&#34;&gt;启动图片优化容器&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./fvtt.sh do_optim
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;移除图片优化容器&#34;&gt;移除图片优化容器&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./fvtt.sh undo_optim
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;移除 FVTT 或清空也会移除图片优化容器&lt;/em&gt;。&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Deployment: Windows 部署 FoundryVTT 教程</title>
      <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/windows/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/windows/</guid>
      <description>
        
        
        &lt;blockquote&gt;
&lt;p&gt;本篇教程参考 FVTT 英文社群网站 &lt;a href=&#34;https://foundry-vtt-community.github.io/wiki/Windows/&#34;&gt;Windows 托管教程&lt;/a&gt;和&lt;a href=&#34;http://www.goddessfantasy.net/bbs/index.php?topic=117014.0&#34;&gt;猫斯基的 Windows Server 部署教程&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;选择你的安装方式&#34;&gt;选择你的安装方式&lt;/h2&gt;
&lt;p&gt;首先，你得租用一台云服务器。不管运营商是阿里云、腾讯云还是百度云，同系统的操作都是一样的。本教程使用的是腾讯云服务器。&lt;/p&gt;
&lt;p&gt;FoundryVTT 在 Windows 服务器上有两种部署方式：1 是使用 EXE 版本直接安装；2 是使用 Node.js 版本进行安装。
二者相较起来，EXE 版本比较接近平时的 Windows 使用操作，适合刚入门的初学者；Node.js 版本需要一些指令操作，适合有一定基础的用户。
在实际的测试中，二者不存在实际的性能差距，仅仅是操作和运行方式不同，所以请不要担心。&lt;/p&gt;
&lt;h3 id=&#34;exe-版本&#34;&gt;EXE 版本&lt;/h3&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;进入你的服务器运营商网页后台，设置你的远程连接密码&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在&lt;a href=&#34;https://foundryvtt.com/&#34;&gt;Foundry VTT 官网&lt;/a&gt;下载 FoundryVTT 的 &lt;code&gt;.exe&lt;/code&gt; 安装包，右键&lt;code&gt;复制&lt;/code&gt;（或&lt;kbd&gt;Ctrl+C&lt;/kbd&gt;）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/winserver/03-download.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在你的桌面上右键 &lt;code&gt;开始&lt;/code&gt; → &lt;code&gt;运行&lt;/code&gt;（或者按 &lt;kbd&gt;Win+R&lt;/kbd&gt;），输入 &lt;code&gt;mstsc&lt;/code&gt;，确定&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/winserver/00-connect.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;输入 &lt;code&gt;你的服务器IP&lt;/code&gt; 连接&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/winserver/01-mstsc.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;输入 &lt;code&gt;你的登录密码&lt;/code&gt; 确定，进入服务器远程桌面&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/winserver/02-password.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;打开 &lt;code&gt;C&lt;/code&gt; 盘，右键粘贴（或&lt;kbd&gt;Ctrl+V&lt;/kbd&gt;）你刚才复制的 &lt;code&gt;FoundryVTT.exe&lt;/code&gt; 安装包，双击安装&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装完成后，双击桌面图标运行 FVTT，输入授权 KEY，然后点击 &lt;code&gt;agree&lt;/code&gt; 同意安装协议&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;右键 &lt;code&gt;开始&lt;/code&gt; → &lt;code&gt;运行&lt;/code&gt;（或者按 &lt;kbd&gt;Win+R&lt;/kbd&gt;）,输入 &lt;code&gt;firewall.cpl&lt;/code&gt;，打开 &lt;code&gt;Windows Defender 防火墙&lt;/code&gt;，点击左方 &lt;code&gt;允许应用或功能通过 Windows Defender 防火墙&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/winserver/firewalls2.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在列表中找到 &lt;code&gt;FoundryVTT&lt;/code&gt;，勾选右边的两个选项，然后保存。
（如果列表中没有，点击 &lt;code&gt;允许其他应用&lt;/code&gt; 并添加 FoundryVTT）&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;开放访问端口。进入你的服务器控制台，找到安全组，或者出入站规则（每个服务器运营商稍微不一样，这里以腾讯云为例子）。
在左侧边栏中点击&lt;code&gt;安全组&lt;/code&gt;，默认会给你分配一个default的组，点击右边&lt;code&gt;修改规则&lt;/code&gt;
点击&lt;code&gt;添加规则&lt;/code&gt;，来源填入&lt;code&gt;all&lt;/code&gt;,协议填入&lt;code&gt;TCP:30000&lt;/code&gt;，点击完成。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;到这里，你就部署成功啦~（撒花）
现在你可以关闭远程桌面，在你的电脑上使用浏览器访问 &lt;code&gt;http://[服务器IP]:30000&lt;/code&gt;，就能直接使用FVTT了！&lt;/p&gt;
&lt;p&gt;注意事项：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;即使关闭远程桌面，只要 FoundryVTT 程序还在运行着就可以使用。&lt;/li&gt;
&lt;li&gt;某些选项会让你重启 FoundryVTT 程序，若程序关闭了，此时你需要登录到远程桌面重新手动启动 FoundryVTT。&lt;/li&gt;
&lt;li&gt;存储在本地的资源可直接使用 &lt;kbd&gt;Ctrl+C&lt;/kbd&gt;, &lt;kbd&gt;Ctrl+V&lt;/kbd&gt; 命令复制到远程桌面文件夹中。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;创建远程桌面登陆快捷方式&#34;&gt;创建远程桌面登陆快捷方式&lt;/h3&gt;
&lt;p&gt;如果你不想每次都点击 &lt;code&gt;运行&lt;/code&gt; 来连接你的远程桌面，那么可以为其创建一个快捷登陆方式（&lt;code&gt;.RDP&lt;/code&gt; 文件）。
（某些服务器运营商后台就提供 RDP 文件下载，如果没有，你可以按照下面的方法创建一个。）&lt;/p&gt;
&lt;p&gt;首先，还是 &lt;code&gt;运行&lt;/code&gt; → &lt;code&gt;mstsc&lt;/code&gt;，点击确定打开下一级对话框。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/winserver/01-mstsc.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;点击左下角的 &lt;code&gt;显示选项&lt;/code&gt;，在下方 &lt;code&gt;连接设置&lt;/code&gt; 栏目中，选择 &lt;code&gt;另存为..&lt;/code&gt;，保存RDP到你的桌面或任意文件夹中。
下次你想要登陆你的远程桌面时，双击打开这个RDP文件即可立即连接。&lt;/p&gt;
&lt;h3 id=&#34;nodejs-版本&#34;&gt;Node.js 版本&lt;/h3&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;下载并安装 Node.js，在 &lt;a href=&#34;https://nodejs.org/zh-cn/download/&#34;&gt;Node.js 官网安装页面&lt;/a&gt;上，点击 Windows 安装包下载&lt;/li&gt;
&lt;li&gt;将 Node.js 安装包通过 &lt;em&gt;远程桌面&lt;/em&gt; 复制到服务器上，然后在服务器上点击安装包文件，一路确认，安装 Node.js&lt;/li&gt;
&lt;li&gt;从 &lt;a href=&#34;https://foundryvtt.com/&#34;&gt;Foundry VTT 官网&lt;/a&gt;上下载最新包，使用 Node.js 部署，所以选择第四项
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/download-url.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;将压缩包通过 &lt;em&gt;远程桌面&lt;/em&gt; 复制到服务器上，直接拖拽或者 &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;C/V&lt;/kbd&gt; 均可，然后解压到某文件夹内（比如桌面）&lt;/li&gt;
&lt;li&gt;在这个目录下，启动 CMD。如图所示，在资源管理器地址栏下输入 &lt;code&gt;cmd&lt;/code&gt;，然后回车打开 CMD 窗口
&lt;ul&gt;
&lt;li&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/win-unzip-cmd.png&#34; alt=&#34;&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;接着运行这个命令
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;node&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.\&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;resources&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;app&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;main&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;js&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果能够看到进行了类似以下的输出，那么证明启动成功。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FoundryVTT &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; 2020-08-15 14:50:37 &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;info&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Foundry Virtual Tabletop - Version 0.6.5
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FoundryVTT &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; 2020-08-15 14:50:37 &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;info&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Running on Node.js - Version 14.8.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在自己电脑的浏览器上输入 &lt;code&gt;http://[服务器IP]:30000&lt;/code&gt; 即可访问 FVTT，然后就可以把远程桌面关闭了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;服务器 IP 一般是云服务器控制台网页上的公网 IP&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;在腾讯云-windows-server-服务器上部署的教程视频&#34;&gt;在腾讯云 Windows Server 服务器上部署的教程视频&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;从 26:12 秒开始是部署过程&lt;/p&gt;
&lt;/blockquote&gt;
&lt;style&gt;
.aspect-ratio {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 75%;
}
        
.aspect-ratio iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
}
&lt;/style&gt;

&lt;div class=&#34;aspect-ratio&#34;&gt;
    &lt;iframe src=&#34;https://player.bilibili.com/player.html?bvid=BV1gE411A7c4&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&#34;
    scrolling=&#34;no&#34;
    frameborder=&#34;no&#34;
    framespacing=&#34;0&#34;
    allowfullscreen=&#34;true&#34;&gt;
    &lt;/iframe&gt;
&lt;/div&gt;

      </description>
    </item>
    
    <item>
      <title>Deployment: FoundryVTT 使用 CDN 教程</title>
      <link>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/cdn/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://fvtt-cn.kagangtuya.top/deployment/gettingstarted/cdn/</guid>
      <description>
        
        
        

&lt;div class=&#34;pageinfo pageinfo-primary&#34;&gt;
&lt;p&gt;CDN 使用指南，基于 &lt;a href=&#34;../docker/#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B&#34;&gt;Docker 部署教程&lt;/a&gt;部署后进行，与各云服务提供商&lt;em&gt;利益无关&lt;/em&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id=&#34;faq&#34;&gt;FAQ&lt;/h2&gt;
&lt;h3 id=&#34;cdn-是什么干什么解决了什么问题&#34;&gt;CDN 是什么/干什么/解决了什么问题？&lt;/h3&gt;
&lt;p&gt;CDN 是云厂商提供的内容分发网络服务，厂商在各地部署成千上万的服务器，而这些服务器上将会缓存你需要加速访问的站点上的多媒体、脚本、样式等体积较大的&lt;strong&gt;静态内容&lt;/strong&gt;（以及使用全站加速时，代理访问你的站点上的动态内容，比如 FVTT 用到的 WebSocket 连接）。&lt;/p&gt;
&lt;p&gt;通过这些缓存与代理，用户在访问站点时，通常会根据网络情况，自动就近选择离用户近、网络质量好的服务器，代替你原本站点的服务器来提供内容。&lt;/p&gt;
&lt;p&gt;即使你原本站点带宽很小（比如 1Mbps）、与用户之间延迟很高，甚至服务器性能不足。对于一张 10M 大小的图片文件，传递给 5 个用户，每个用户可能需要 7 分钟才能都加载出来。而 CDN 在缓存后，能够以 CDN 自身的速率（可以轻松超过 100 Mbps）就近传输给用户，可能只需一两秒，大大加快了访问速度。&lt;/p&gt;
&lt;p&gt;上面的例子也可以看出，使用 CDN 之后，不再需要考虑“同时多少个用户访问之后，服务器带宽不足，每个人都变很慢”的问题，CDN 服务带宽永远是配置足够的。&lt;/p&gt;
&lt;p&gt;而且，境内云服务的 CDN 流量价格，常常要比服务器按流量计费来得便宜，静态内容加速通常是 0.2 元/GB 左右或更低（预付费流量包等方式）。&lt;/p&gt;
&lt;p&gt;很多 CDN 服务也提供静态内容压缩功能，可以代替你的服务器，对缓存的图片、脚本、样式表文件进行压缩之后传递给用户，降低服务器开销。更棒的是，有些 CDN 服务可以对图片、音频、视频等多媒体资源的缓存，进行动态的剪裁、缩放、压制，大幅降低文件尺寸，实现更快地访问。&lt;/p&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;太长，不看&lt;/h4&gt;
CDN 主要解决 FVTT 服务器可能会遇到的带宽不足、延迟高等网络问题，以及一定情况下降低服务器的性能开销与花费开支
&lt;/div&gt;

&lt;h3 id=&#34;加速-fvtt-需要使用什么样的-cdn&#34;&gt;加速 FVTT 需要使用什么样的 CDN？&lt;/h3&gt;
&lt;p&gt;使用 FVTT 进行跑团，会有大量的图片、脚本文件等静态内容，天然的，非常适合使用 CDN 进行加速，几乎是 CDN 最标准的使用场景。&lt;/p&gt;
&lt;p&gt;但同时也会发现，FVTT 是实时应用程序。比如指示物的移动、聊天消息的发送接收等，都是实时更新的。这些基于 &lt;strong&gt;WebSocket 协议&lt;/strong&gt;的实时数据传输，以及其他的 API 请求，即是&lt;strong&gt;动态内容&lt;/strong&gt;。动态内容，没有办法进行真正意义上的“缓存”。&lt;em&gt;尽管 WebSocket 是动态内容的一种，但不是所有支持动态内容加速的 CDN 都支持 WebSocket，这一点一定要注意&lt;/em&gt;。&lt;/p&gt;
&lt;p&gt;这就需要支持动态内容加速的 CDN 服务，而国内规模大的云厂商，比如阿里云、腾讯云的全站加速功能，都支持动态内容和 WebSocket 的加速，符合 FVTT 使用的需求。&lt;/p&gt;
&lt;p&gt;即，FVTT 使用的 CDN 需要支持：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;静态内容，用于提供多媒体、脚本、样式表等各种文件的静态内容加速（只要是 CDN 服务，均支持）&lt;/li&gt;
&lt;li&gt;动态内容，用于提供 API 请求的加速（除非自己配置动静分离，需要 CDN 支持）&lt;/li&gt;
&lt;li&gt;WebSocket，用于提供 FVTT 最常用的 WS 协议的加速（除非自己配置动静分离，需要 CDN 支持）&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;太长，不看&lt;/h4&gt;
一般来说，最好直接使用阿里云、腾讯云的全站加速服务，或者其他支持 WebSocket 的 CDN 服务，免于自己配置动静分离（如果你会配置，应该也不需要看这篇文章）
&lt;/div&gt;

&lt;h3 id=&#34;购买时境内境外全球应该怎么选&#34;&gt;购买时，境内/境外/全球应该怎么选？&lt;/h3&gt;
&lt;p&gt;正如教程中域名一章里提到的一样，在境内使用域名提供互联网服务尤其是 CDN 服务，是一定需要&lt;a href=&#34;../domain-name/#%E5%A4%87%E6%A1%88&#34;&gt;备案&lt;/a&gt;的。因此，只要想在境内使用 CDN，你也同样要对你的域名进行备案，然后使用这个备案的域名来加速。&lt;/p&gt;
&lt;p&gt;境外 CDN 则没有这个问题，在境外提供互联网服务无需备案。而且，境外 CDN 也可以在国内访问。但是，境内的玩家访问境外 CDN 速度不甚理想。如果你的服务器在境内，而 CDN 使用“纯”境外，玩家使用 CDN 时可能不仅起不到加速作用，反而拖累了访问速度，这是出口带宽拥挤和墙所导致的问题，除非使用特定手段访问，或者线路不错，否则不建议当你的玩家都在境内时这么做。&lt;/p&gt;
&lt;p&gt;而很多 CDN 包含全球服务，即境内+境外。因为涉及到了提供境内服务，所以同样需要备案。如果你的玩家正好有位于境内的也有境外的，可以考虑使用全球 CDN，一次性解决境内外玩家的加速访问。&lt;/p&gt;
&lt;h2 id=&#34;购买配置-cdn&#34;&gt;购买/配置 CDN&lt;/h2&gt;
&lt;p&gt;接下来介绍如何购买和配置 CDN。&lt;/p&gt;
&lt;h3 id=&#34;docker-部署流程中的注意事项&#34;&gt;Docker 部署流程中的注意事项&lt;/h3&gt;
&lt;p&gt;在购买前，先按照 &lt;a href=&#34;../docker&#34;&gt;Docker 部署教程&lt;/a&gt;进行自动脚本部署，注意在填写参数时，&lt;strong&gt;要输入“FoundryVTT 使用 CDN 时的加速域名”，而且一定不能和“FoundryVTT 已绑定该服务器的域名”一样&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;比如你拥有 &lt;code&gt;fvtt.com&lt;/code&gt; 域名，计划使用 &lt;code&gt;my.fvtt.com&lt;/code&gt; 作为 FVTT 绑定域名，使用 &lt;code&gt;cdn.fvtt.com&lt;/code&gt; 作为加速后的域名。&lt;/p&gt;
&lt;p&gt;那么 &lt;code&gt;FoundryVTT 已绑定该服务器的域名&lt;/code&gt;就填写 &lt;code&gt;my.fvtt.com&lt;/code&gt; 后回车，&lt;code&gt;FoundryVTT 使用 CDN 时的加速域名&lt;/code&gt;就填写 &lt;code&gt;cdn.fvtt.com&lt;/code&gt; 后回车。&lt;/p&gt;
&lt;p&gt;部署相关的其他信息参见 &lt;a href=&#34;../docker/#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B&#34;&gt;Docker 部署教程&lt;/a&gt;。&lt;/p&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Tips&lt;/h4&gt;
如果使用 CDN 加速域名，可以考虑不使用 FVTT 绑定域名，在输入参数时回车跳过 &lt;code&gt;FoundryVTT 使用 CDN 时的加速域名&lt;/code&gt;即可
&lt;/div&gt;

&lt;p&gt;如此，FVTT 就准备好了使用这个域名进行 CDN 加速，然后可以按下列步骤，配置对应域名的 CDN。&lt;/p&gt;
&lt;h3 id=&#34;以阿里云为例配置全站加速&#34;&gt;以阿里云为例，配置全站加速&lt;/h3&gt;
&lt;p&gt;以刚才的加速域名 &lt;code&gt;cdn.fvtt.com&lt;/code&gt; 为例，接下来是如何在阿里云上配置全站加速的步骤。阿里云界面若更新，或者使用其他云服务，操作大同小异。&lt;/p&gt;
&lt;p&gt;记住，对境内提供 CDN 一定需要先备案。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;登入控制台后，找到&lt;strong&gt;全站加速&lt;/strong&gt;，并且按提示开通对应服务
&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/cdn/ali-list.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在全站加速的管理页中，选择&lt;strong&gt;域名管理&lt;/strong&gt;，点击&lt;em&gt;添加域名&lt;/em&gt;，然后填写表单&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;加速域名：使用 CDN 访问 FVTT 的域名，即例中的 &lt;code&gt;cdn.fvtt.com&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;加速区域：依照&lt;a href=&#34;#%E8%B4%AD%E4%B9%B0%E6%97%B6%E5%A2%83%E5%86%85%E5%A2%83%E5%A4%96%E5%85%A8%E7%90%83%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E9%80%89&#34;&gt;上述 FAQ&lt;/a&gt;按需选择&lt;/li&gt;
&lt;li&gt;端口：和默认一样，选择 80 端口即可&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这里需要注意的是，源站信息的&lt;strong&gt;类型&lt;/strong&gt;和&lt;strong&gt;域名/IP&lt;/strong&gt; 两项内容的填写&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果你使用了 FVTT 绑定域名：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;类型&lt;/strong&gt;：选择源站域名&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;域名&lt;/strong&gt;：输入框中填入你的 FVTT 绑定域名（不能是加速域名），优先级不需要修改（例 &lt;code&gt;my.fvtt.com&lt;/code&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果你没有使用 FVTT 绑定域名：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;类型&lt;/strong&gt;：选择 IP&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IP&lt;/strong&gt;：输入框中填入你运行 FVTT 服务器的公网 IP 地址，优先级不需要修改&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;确认后，回到域名管理界面，会显示对应域名的 CNAME 项&lt;/p&gt;
&lt;p&gt;复制这一段 CNAME，我们需要把我们这个加速域名 &lt;code&gt;fvtt.cdn.com&lt;/code&gt; 的 CNAME 记录设置为这一段的值。&lt;/p&gt;
&lt;p&gt;阿里云的面板上，提供了如何配置 CNAME 的&lt;a href=&#34;https://help.aliyun.com/document_detail/64928.html&#34;&gt;帮助文档&lt;/a&gt;，其他域名解析服务也大同小异。&lt;/p&gt;
&lt;p&gt;在你的域名解析管理面板，类似如此配置子域名的 CNAME 即可，比如域名解析服务设置界面如下。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://fvtt-cn.kagangtuya.top/images/deployment/cdn/cname-set.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;注意，别名或者 CNAME 处记录，是从之前全站加速的域名管理面板复制来的。&lt;/p&gt;
&lt;p&gt;如何绑定域名也可以参见 &lt;a href=&#34;../domain-name/#%E7%BB%91%E5%AE%9A%E5%AD%90%E5%9F%9F%E5%90%8D&#34;&gt;绑定（子）域名&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置 CDN
在全站加速域名管理面板中点击对应域名的配置，进入配置页面&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基本配置：无需修改，只需确认源站信息输入正确即可&lt;/li&gt;
&lt;li&gt;回源配置：我们需要修改两项，&lt;strong&gt;回源 HOST&lt;/strong&gt; 以及&lt;strong&gt;静态协议跟随回源&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;回源 HOST&lt;/strong&gt;：开启，并直接选加速域名即可；或者选自定义域名，然后填写你的加速域名（例 &lt;code&gt;fvtt.cdn.com&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;静态协议跟随回源&lt;/strong&gt;：开启，并选择 HTTP 即可&lt;/li&gt;
&lt;li&gt;可选：回源请求超时时间，可以酌情调整，比如改为 180 秒&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;动静态加速规则：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;动态加速&lt;/strong&gt;：确认开关处于开启状态，默认是开启的&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;协议跟随回源&lt;/strong&gt;：这里的回源是为动态内容设置的，改为 HTTP 即可&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自适应缓存&lt;/strong&gt;：开启，自适应缓存会尊重源站的缓存协商&lt;/li&gt;
&lt;li&gt;可选：在缓存配置里，详细设置不同规则下文件的过期时间，&lt;em&gt;但这样做可能会导致使用过期没更新的缓存的文件，需要手动刷新 CDN 的缓存！详见&lt;a href=&#34;#%E4%BD%BF%E7%94%A8-cdn%E4%BD%86%E6%98%AF%E4%B8%8D%E4%B8%8E%E6%BA%90%E7%AB%99%E5%8D%8F%E5%95%86&#34;&gt;下文&lt;/a&gt;&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;HTTPS 配置：强烈推荐开启 HTTPS 访问，尽管使用 HTTPS 访问，CDN 会额外收取 HTTPS 费用（价格很低）
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;HTTPS 证书&lt;/strong&gt;：推荐开启 HTTPS 安全加速。如无必要，证书来源选择免费证书，然后同意授权并确认即可&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP/2 设置&lt;/strong&gt;：HTTPS 启用后才可以开启，默认使用 HTTPS 就会开启，有效提升站点访问速度&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;性能优化：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;页面优化&lt;/strong&gt;：推荐开启，除非你是 MOD 开发者并使用 CDN 加速站进行开发&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;智能压缩&lt;/strong&gt;：推荐开启，可以小幅度降低静态内容的文件尺寸&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;WebSocket：一定要确保 &lt;strong&gt;WebSocket 开关&lt;/strong&gt;处于&lt;strong&gt;开启&lt;/strong&gt;状态
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;心跳时间&lt;/strong&gt;：可以酌情调整，比如改为 120 秒&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;回源协议&lt;/strong&gt;：这里的回源是为 WebSocket 设置的，选择 HTTP 即可&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;如果开启了 HTTPS 访问，等待云服务下发好证书后，即可通过加速域名（例 &lt;code&gt;fvtt.cdn.com&lt;/code&gt;）访问
&lt;br/&gt;
如果没有使用 HTTPS，直接浏览器里打开加速域名即可&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果以上配置完毕后，仍然无法正常连接加速域名，请检查域名 CNAME 解析是否正确。&lt;/p&gt;
&lt;p&gt;配置完成后，云服务提供商即会开始按流量、访问次数或者其他计费方式，开始计费。&lt;/p&gt;
&lt;p&gt;如果没有特殊需求的话，可以看一下云服务提供商是否有 CDN 流量包（购买前要确认是否适用于全站加速），预先购买这些流量包可以降低开销。&lt;/p&gt;
&lt;h2 id=&#34;fvtt-使用-cdn-的三种情况&#34;&gt;FVTT 使用 CDN 的三种情况&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;举个例子，FVTT 是可口可乐工厂，CDN 是京东。你一直要喝可乐，但你很鸡掰，只会想喝最新批次的可乐（使用服务器上最新的改动）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;不使用-cdn直接访问&#34;&gt;不使用 CDN，直接访问&lt;/h3&gt;
&lt;p&gt;不用 CDN，直接访问 FVTT 服务器，等同于：&lt;/p&gt;
&lt;p&gt;你每次要喝可乐，是可口可乐工厂直销给你。但是因为工厂离你远（服务器远），或者工厂的快递不行（线路不好/带宽小），所以等待可乐快递到家会慢（加载慢）。&lt;/p&gt;
&lt;p&gt;好在，你自己家里有个很大的冰箱（浏览器缓存），你可以存很多可乐，方便你不用快递买就可以喝。&lt;/p&gt;
&lt;p&gt;然而你很鸡掰，只喝最新批次，所以你在喝自己冰箱里的可乐之前，会有疑虑：&lt;/p&gt;
&lt;p&gt;你在喝可乐之前，只用问工厂：“&lt;em&gt;我冰箱里的 10 月批次是最新批次吗&lt;/em&gt;”，工厂回复你“&lt;em&gt;是啊&lt;/em&gt;”，你就可以放心地直接喝自己冰箱的可乐了（使用浏览器缓存），而不用等工厂慢递；但如果工厂说：“&lt;em&gt;不，我们已经有 12 月的新批次了&lt;/em&gt;”，而你家冰箱只有 10 月批次的（缓存过期），你就只能再等一次工厂的慢递了。&lt;/p&gt;
&lt;p&gt;这个过程就叫做&lt;strong&gt;协商缓存&lt;/strong&gt;，通过协商确定你用不用缓存（喝不喝你自己家冰箱里的可乐）。&lt;/p&gt;
&lt;h3 id=&#34;使用-cdn但是不与源站协商&#34;&gt;使用 CDN，但是不与源站协商&lt;/h3&gt;
&lt;p&gt;可口可乐工厂快递给你太慢了，你决定从京东买：&lt;/p&gt;
&lt;p&gt;你从京东下订单，京东（CDN）会跑去找可口可乐下订单（CDN 回源），然后在自己的五湖四海的所有仓库里存一大堆可乐（CDN 缓存），然后用离每一个客户最近的仓库给客户送快递，自然就要比工厂的慢递快很多。&lt;/p&gt;
&lt;p&gt;这样，你每次要喝可乐的时候都找京东要，京东总会安排最近最快的快递（加载快），然后你也会存很多在自己家大冰箱，方便你冰箱里有可乐的时候，可以更快地喝到（浏览器仍然会缓存）。毕竟京东仓库离你再近，也没有你的冰箱离你近。&lt;/p&gt;
&lt;p&gt;但这就有一个问题出现了：当工厂的可乐批次变成 12 月了之后，你从京东买的可能还是 10 月批次（CDN 缓存过期）。&lt;/p&gt;
&lt;p&gt;你喝可乐之前，看了下自己家冰箱里的，是 10 月批次，于是你问京东“&lt;em&gt;是不是 10 月是最新批次&lt;/em&gt;”（和 CDN 协商缓存）。但其实京东也没从工厂下过新的订单了，京东一看，“&lt;em&gt;我这里最新批次也是 10 月&lt;/em&gt;“，你就放心大胆的喝了，结果其实是你不想喝的过期的可乐。&lt;/p&gt;
&lt;p&gt;这个可能导致的问题，举例来说，你 FVTT 服务器上更新的 MOD 已经到了 2.0 版，但 CDN 的缓存里还是之前 FVTT 服务器上的 1.0 版（取决于缓存过期时间规则）：你直接访问 FVTT 服务器地址，这个 MOD 是 2.0 版；但你用 CDN 访问，这个 MOD 就始终是 1.0 版。&lt;/p&gt;
&lt;p&gt;除了 MOD，图片、翻译、脚本和其他资源等，都可能出现类似的过期情形，严重情况下会导致 FVTT 或者 MOD 无法正常使用（比如后端响应格式变更，前端未更新，无法处理新的结果）。&lt;/p&gt;
&lt;h3 id=&#34;使用-cdn并且协商&#34;&gt;使用 CDN，并且协商&lt;/h3&gt;
&lt;p&gt;这种情况下，等同于你还是从京东买，但是你和京东签订了一个合同：&lt;/p&gt;
&lt;p&gt;你每次要喝可乐的时候，都会告诉京东，我冰箱里的是 10 月批次的，问京东有没有新批次。然后京东会代替你，问工厂有没有新批次。&lt;/p&gt;
&lt;p&gt;如果工厂没有新批次（服务器文件未更改），京东就会告诉你，你就喝你冰箱里的 10 月批次的就行了。&lt;/p&gt;
&lt;p&gt;如果工厂有新批次（服务器文件更新），比如 12 月批次。京东就会立马从工厂下新订单，把自己仓库里的 10 月批次的全倒河里（CDN 淘汰过期缓存），然后储备 12 月的，并且给你发 12 月批次的快递，告诉你有新批次，喝这一批。以后即使你冰箱的喝完了（浏览器缓存清空），再找京东要，京东发给你的，也是最新的批次。&lt;/p&gt;
&lt;p&gt;这样的话，即使工厂更新批次了，你也可以喝到京东送来的新批次，而不是过期的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;进阶阅读：&lt;a href=&#34;https://support.cloudflare.com/hc/zh-cn/articles/115003206852&#34;&gt;Cloudflare 源站缓存控制介绍&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Tips&lt;/h4&gt;
使用 &lt;a href=&#34;../docker/#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B&#34;&gt;Docker 脚本&lt;/a&gt;（脚本版本 v1.3+）部署并按&lt;a href=&#34;#%E4%BB%A5%E9%98%BF%E9%87%8C%E4%BA%91%E4%B8%BA%E4%BE%8B%E9%85%8D%E7%BD%AE%E5%85%A8%E7%AB%99%E5%8A%A0%E9%80%9F&#34;&gt;上文&lt;/a&gt;的方法配置（没有设置缓存过期时间），CDN 的策略会是&lt;a href=&#34;#%E4%BD%BF%E7%94%A8-cdn%E5%B9%B6%E4%B8%94%E5%8D%8F%E5%95%86&#34;&gt;使用 CDN 并且协商&lt;/a&gt;，&lt;em&gt;需要 CDN 支持 &lt;code&gt;proxy-revalidate&lt;/code&gt;&lt;/em&gt;
&lt;/div&gt;


      </description>
    </item>
    
  </channel>
</rss>
